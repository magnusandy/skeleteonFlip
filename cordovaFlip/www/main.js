!function(t){function e(e){for(var i,a,s=e[0],u=e[1],c=e[2],l=0,f=[];l<s.length;l++)a=s[l],r[a]&&f.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);for(d&&d(e);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={1:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=u;o.push([302,0]),n()}([,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(301),o=function(t){return n(202)("./"+t)},a=o("sword.png"),s=o("skull.png"),u=o("potion.png"),c=o("coin.png"),d=o("card.png"),l=o("menu/start.png"),f=o("menu/options.png"),p=o("menu/help.png"),g=o("menu/cards.png"),h=o("menu/intro.png"),y=o("menu/credits.png"),S=o("menu/playing.png"),w=o("menu/confirm.png"),b=o("menu/next.png"),m=o("menu/menu.png"),v=o("menu/upgrade.png"),C=o("title.png"),_=o("GameOver.png"),x=o("numbers/0.png"),O=o("numbers/1.png"),T=o("numbers/2.png"),M=o("numbers/3.png"),D=o("numbers/4.png"),k=o("numbers/5.png"),P=o("numbers/6.png"),E=o("numbers/7.png"),A=o("numbers/8.png"),G=o("numbers/9.png"),B=o("ui/sword.png"),z=o("ui/heart.png");e.uiHeart=z;var R=o("ui/coinPile.png"),I=o("ui/left.png"),L=o("ui/right.png"),j=o("ui/x.png"),W=o("ui/blank.png"),H=o("ui/scroll.png"),N=o("optionTitle.png"),U=o("helpTitle.png"),F=o("upgradesTitle.png"),V=o("upgrades/grid.png"),Y=o("upgrades/difficulty.png"),K=n(163),X=o("victory.png"),Z=n(162),J=n(161),Q=n(160),q=n(159),$=n(158),tt=n(157),et=n(156),nt=n(155),it=n(154),rt=o("background.png"),ot={victory:new i.Texture(X),gameOver:new i.Texture(_),title:new i.Texture(C),sword:new i.Texture(a),skull:new i.Texture(s),potion:new i.Texture(u),coin:new i.Texture(c),card:new i.Texture(d),startMenu:new i.Texture(l),optionMenu:new i.Texture(f),helpMenu:new i.Texture(p),cardMenu:new i.Texture(g),introMenu:new i.Texture(h),creditsMenu:new i.Texture(y),playingMenu:new i.Texture(S),confirmMenu:new i.Texture(w),nextMenu:new i.Texture(b),menuMenu:new i.Texture(m),upgradeMenu:new i.Texture(v),optionTitle:new i.Texture(N),helpTitle:new i.Texture(U),backgroundTile:new i.Texture(rt),upgradeTitle:new i.Texture(F),0:new i.Texture(x),1:new i.Texture(O),2:new i.Texture(T),3:new i.Texture(M),4:new i.Texture(D),5:new i.Texture(k),6:new i.Texture(P),7:new i.Texture(E),8:new i.Texture(A),9:new i.Texture(G),uiSword:new i.Texture(B),uiHeart:new i.Texture(z),uiLeft:new i.Texture(I),uiRight:new i.Texture(L),uiX:new i.Texture(j),uiBlank:new i.Texture(W),uiCoins:new i.Texture(R),uiScroll:new i.Texture(H),gridTile:new i.Texture(V),difficultyTile:new i.Texture(Y),myMono:new i.Texture(K),cardSound:new i.Sound(Z),boneSound:new i.Sound(Q),coinSound:new i.Sound(tt),laughSound:new i.Sound($),potionSound:new i.Sound(J),swordSound:new i.Sound(q),victorySound:new i.Sound(nt),buttonSound:new i.Sound(it),backgroundMusic:new i.Sound(et)};e.Resources=ot,e.Config={maxHealth:3,maxAttack:2,gridPadding:4,backgroundColor:"#dddddd",exitButtonSize:50,uiBigSize:50,optionPadding:30},e.Upgrades={gridSize:r.default.create({title:"Grid Size",description:"Unlock bigger grids to increase the challenge. This will allow story mode to go to a higher max level, as well as allow the larger sizes to be chosen for practice.",prices:[{level:1,price:10},{level:2,price:20},{level:3,price:30},{level:4,price:40},{level:5,price:50},{level:6,price:60},{level:7,price:70},{level:8,price:80},{level:9,price:90}]}),difficulty:r.default.create({title:"Difficulty",description:"Things getting routine? Upgrade the difficulty to increase the challenge. Higher difficulties mean less room for error, more skeletons, but more rewards!",prices:[{level:1,price:10},{level:2,price:20},{level:3,price:30},{level:4,price:40},{level:5,price:50}]})}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.engine=t}return t.initialize=function(e){this.singleton?console.log("ERROR: Mobile Manager already initialized"):this.singleton=new t(e)},t.get=function(){if(this.singleton)return this.singleton;throw"Mobile Manager Not defined yet"},t.prototype.isMobile=function(){return this.engine.drawWidth<1200},t.prototype.getUIItemSize=function(){return this.isMobile()?30:50},t.prototype.getUIButtonSizing=function(){return this.isMobile()?{padding:.4,maxScale:.3}:{padding:.4,maxScale:.5}},t.prototype.getMenuHeight=function(){return 4*this.getUIItemSize()},t}();e.default=i},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(47),r=n(19),o=function(){function t(){}return t.get=function(){return this.singleton?this.singleton:(this.singleton=new t,this.singleton)},t.prototype.getGameGridSize=function(){var t=r.default.get();return t.isProgressionDisabled()?t.getChosenGridSize():t.getCurrentLevel()+2},t.prototype.getOptionGridSize=function(){return r.default.get().getChosenGridSize()},t.prototype.getDifficulty=function(){return r.default.get().getChosenDifficulty()},t.prototype.getSkullFactor=function(){return this.getDifficulty().getSkeletonFactor()},t.prototype.getBuffFactor=function(){return this.getDifficulty().getBuffFactor()},t.prototype.isProgressionDisabled=function(){return r.default.get().isProgressionDisabled()},t.prototype.progress=function(){if(!r.default.get().isProgressionDisabled()){var e=r.default.get().getCurrentLevel(),n=r.default.get().getCurrentStage();n>=t.stagesPerNormalLevel?e===r.default.get().getMaxGridSize()-2?r.default.get().setCurrentStage(n+1):(r.default.get().setCurrentStage(1),r.default.get().setCurrentLevel(e+1)):r.default.get().setCurrentStage(n+1)}},t.prototype.setGridSize=function(t){r.default.get().setChosenGridSize(t)},t.prototype.setDifficulty=function(t){r.default.get().setChosenDifficulty(i.Difficulty.getByDifficultyLevel(t))},t.prototype.setProgressionDisabled=function(t){return r.default.get().setProgressionDisabled(t)},t.prototype.resetProgress=function(){var t=r.default.get();t.isProgressionDisabled()||(t.setCurrentLevel(1),t.setCurrentStage(1))},t.prototype.getLevelString=function(){return r.default.get().getCurrentStage()>t.stagesPerNormalLevel?"MAXED":r.default.get().getCurrentLevel()+"."+r.default.get().getCurrentStage()},t.stagesPerNormalLevel=3,t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(11);!function(t){t.STORY_GAME_WINDOW="storyGameWindow",t.GRID_GAME_WINDOW="gridGameWindow",t.MAIN_MENU="mainMenu",t.GAME_OVER="gameOver",t.VICTORY="victory",t.OPTIONS="options",t.HELP="help",t.UPGRADES="upgrades"}(i=e.Scenes||(e.Scenes={})),e.getGameWindow=function(){return r.default.get().isProgressionDisabled()?i.GRID_GAME_WINDOW:i.STORY_GAME_WINDOW}},,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(32),s=n(17),u=n(4),c=n(18),d=function(t){function e(e,n,i){var r=t.call(this)||this;return r.onDown=function(){r.disabled||(r.sprite.clearEffects(),r.sprite.addEffect(new a.Darken(.2)))},r.onEnter=function(){r.disabled||(r.sprite.clearEffects(),r.sprite.addEffect(new a.Darken(.1)))},r.onExit=function(){r.disabled||r.sprite.clearEffects()},r.disabled=i||!1,r.sprite=new o.Sprite(e,0,0,e.width,e.height),r.addDrawing(r.sprite),r.on("pointerdown",r.onDown),r.on(o.EventTypes.PointerUp,r.onClickWrapper(n)),r.on("pointerenter",r.onEnter),r.on("pointerleave",r.onExit),r}return r(e,t),e.prototype.getSprite=function(){return this.sprite},e.prototype.onClickWrapper=function(t){var e=this;return c.safePointerUp(function(){e.disabled||(e.sprite.clearEffects(),s.default.get().playSoundInterrupt(u.Resources.buttonSound),t())})},e.prototype.setDisabled=function(t){this.disabled=t},e}(o.Actor);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(19),o=function(){function t(){}return t.get=function(){return t.soundManager?t.soundManager:(t.soundManager=new t,t.soundManager)},t.prototype.disableSound=function(){this.backgroundSound&&(this.backgroundSound.stop(),this.backgroundSound=null)},t.prototype.backgroundMusicStart=function(){r.default.get().isSoundOff()||this.backgroundSound||(this.backgroundSound=i.Resources.backgroundMusic,this.backgroundSound.volume=.1,this.backgroundSound.loop=!0,this.backgroundSound.play())},t.prototype.backgroundMusicEnd=function(){r.default.get().isSoundOff()&&this.backgroundSound&&(this.backgroundSound.stop(),this.backgroundSound=null)},t.prototype.playSoundInterrupt=function(t,e){this.currentSound&&this.currentSound.isPlaying()&&(this.currentSound.pause(),this.currentSound=null),this.playSoundWithAfter(t,e)},t.prototype.playSoundWithAfter=function(t,e){r.default.get().isSoundOff()||(this.currentSound=t,e?t.play().then(e):t.play())},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);function r(t,e,n,r,o,a){var s=o||1,u=t*s,c=e*s,d=c/r;if(d*n>t){var l,f=u/n;return{width:r*(l=a<f?a:f),height:u*l,scale:new i.Vector(l,l)}}return{width:c*(l=a<d?a:d),height:n*l,scale:new i.Vector(l,l)}}e.calcDimensionsSingleObjectTexture=function(t,e,n,i,o){return r(t,e,n.height,n.width,i,o)},e.calcDimensionsSingleObject=r,e.safePointerUp=function(t){return function(e){"pointerup"===e.ev.type&&t()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=n(47),o=n(153),a=n(46),s=function(){function t(t,e,n,i,r,o,a,s,u,c,d){this.soundOff=t,this.progressionDisabled=e,this.chosenDifficulty=n,this.chosenGridSize=i,this.maxGrid=r,this.maxDifficulty=o,this.currentLevel=a,this.currentStage=s,this.storyGrid=u,this.practiceGrid=c,this.totalCoins=d}return t.get=function(){return this.singleton},t.initialize=function(){var e=this;return o.config({name:"skeletonFlip",version:1,size:4980736,storeName:"playerSettings",description:"Store save data"}),o.getItem(t.STORE_KEY,function(n,i){if(console.log("retrieved from storage:",[i]),n)console.log("problem retrieving from store: "+n),e.singleton=t.DEFAULT;else if(i){var r=i;1===r.version&&(e.singleton=t.deserializeV1(r))}else e.singleton=t.DEFAULT})},t.prototype.saveGridState=function(t){this.isProgressionDisabled()?this.practiceGrid=i.Optional.ofNullable(t):this.storyGrid=i.Optional.ofNullable(t),this.saveToStorage()},t.prototype.getGridState=function(){return this.isProgressionDisabled()?this.practiceGrid:this.storyGrid},t.prototype.setCurrentLevel=function(t){this.currentLevel=t,this.saveToStorage()},t.prototype.setCurrentStage=function(t){this.currentStage=t,this.saveToStorage()},t.prototype.setChosenGridSize=function(t){this.chosenGridSize=t,this.saveToStorage()},t.prototype.setChosenDifficulty=function(t){this.chosenDifficulty=t,this.saveToStorage()},t.prototype.isSoundOff=function(){return this.soundOff},t.prototype.setIsSoundOff=function(t){this.soundOff=t,this.saveToStorage()},t.prototype.getCurrentLevel=function(){return this.currentLevel},t.prototype.getCurrentStage=function(){return this.currentStage},t.prototype.getChosenDifficulty=function(){return this.chosenDifficulty},t.prototype.getChosenGridSize=function(){return this.chosenGridSize},t.prototype.setProgressionDisabled=function(t){this.progressionDisabled=t,this.saveToStorage()},t.prototype.isProgressionDisabled=function(){return this.progressionDisabled},t.prototype.getTotalCoins=function(){return this.totalCoins},t.prototype.setTotalCoins=function(t){this.totalCoins=t,this.saveToStorage()},t.prototype.getMaxGridSize=function(){return this.maxGrid},t.prototype.setMaxGridSize=function(t){this.maxGrid=t,this.saveToStorage()},t.prototype.getMaxDiff=function(){return this.maxDifficulty},t.prototype.setMaxDiff=function(t){this.maxDifficulty=t,this.saveToStorage()},t.prototype.serializeV1=function(){return{version:1,soundOff:this.soundOff,progressionDisabled:this.progressionDisabled,chosenDifficulty:this.chosenDifficulty.getDifficultyLevel(),chosenGridSize:this.chosenGridSize,maxLevel:this.maxGrid,maxDifficulty:this.maxDifficulty.getDifficultyLevel(),currentLevel:this.currentLevel,currentStage:this.currentStage,storyGrid:this.storyGrid.map(function(t){return t.toSaveState()}).orElse(null),practiceGrid:this.practiceGrid.map(function(t){return t.toSaveState()}).orElse(null),totalCoins:this.totalCoins}},t.deserializeV1=function(e){return new t(e.soundOff,e.progressionDisabled,r.Difficulty.getByDifficultyLevel(e.chosenDifficulty),e.chosenGridSize,e.maxLevel,r.Difficulty.getByDifficultyLevel(e.maxDifficulty),e.currentLevel,e.currentStage,i.Optional.ofNullable(e.storyGrid).map(function(t){return a.GridState.fromSaveState(t)}),i.Optional.ofNullable(e.practiceGrid).map(function(t){return a.GridState.fromSaveState(t)}),e.totalCoins)},t.prototype.saveToStorage=function(){o.setItem(t.STORE_KEY,this.serializeV1())},t.prototype.clearStorage=function(){o.setItem(t.STORE_KEY,null)},t.STORE_KEY="player_settings_v1",t.DEFAULT=new t(!1,!1,r.Difficulty.VERY_EASY,3,5,r.Difficulty.EASY,1,1,i.Optional.empty(),i.Optional.empty(),0),t}();e.default=s},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(4),o=function(){function t(){this.generalMono=new i.SpriteFont(r.Resources.myMono,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ.: ",!0,12,4,99,135)}return t.get=function(){return this.singleton?this.singleton:new t},t.prototype.getMono=function(){return this.generalMono},t}();e.default=o},,,,,,,,,,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),a=n(3),s=n(4),u=function(t){function e(e,n){var i=this,r=s.Resources.uiX;return(i=t.call(this,r,n)||this).scale=new a.Vector(s.Config.exitButtonSize/r.width,s.Config.exitButtonSize/r.height),i.setHeight(s.Config.exitButtonSize),i.setWidth(s.Config.exitButtonSize),i.x=e.drawWidth-s.Config.exitButtonSize/2-s.Config.gridPadding,i.y=s.Config.exitButtonSize/2+s.Config.gridPadding,i}return r(e,t),e}(o.default);e.ExitButton=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(4),o=function(){function t(t,e){var n=r.Resources.backgroundTile,o=Math.ceil(t/n.width),a=Math.ceil(e/n.height),s=new i.TileMap(0,0,n.width,n.height,a,o);s.registerSpriteSheet("background",new i.SpriteSheet(n,1,1,n.width,n.height));for(var u=new i.TileSprite("background",0),c=0;c<a*o;c++)s.getCellByIndex(c).pushSprite(u);this.tileMap=s}return t.prototype.getTileMap=function(){return this.tileMap},t.getDefaultTileMap=function(e){return new t(e.drawWidth,e.drawHeight).getTileMap()},t.getCustomTileMap=function(e,n){return new t(e,n).getTileMap()},t}();e.default=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(35),s=n(4),u=n(151),c=n(16),d=function(t){function e(e){var n=t.call(this,e)||this;return n.engine=e,n.scrollBar=new u.default(e),n.add(n.scrollBar),n}return r(e,t),e.prototype.setBackround=function(t){t>this.engine.drawHeight?this.addTileMap(a.default.getCustomTileMap(this.engine.drawWidth,t+s.Config.optionPadding)):this.addTileMap(a.default.getDefaultTileMap(this.engine))},e.prototype.initScroll=function(t){this.scrollBar.setScrollBottom(this.engine.drawHeight/2+(t-this.engine.drawHeight)+s.Config.optionPadding),this.camera.strategy.lockToActorAxis(this.scrollBar,o.Axis.Y)},e.prototype.createButton=function(t,e,n,i,r){var o=new c.default(i,r);return o.x=e,o.y=n,o.scale=t.scale,o.setHeight(t.height),o.setWidth(t.width),o},e}(o.Scene);e.default=d},,,,,,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(3),s=n(4),u=n(3),c=n(32),d=n(17),l=n(11),f=n(6);!function(t){t.COIN="coin",t.SKELETON="skeleton",t.POTION="potion",t.ATTACK="attack"}(o=e.CardType||(e.CardType={}));var p=function(t){function e(n,i,r,a,u,l,f){var p=t.call(this)||this;p.onEnter=function(){p.baseSprite.clearEffects(),p.baseSprite.addEffect(new c.Darken(.2))},p.onExit=function(){p.baseSprite.clearEffects()},p.playSound=function(){var t;p.cardType===o.SKELETON?t=s.Resources.boneSound:p.cardType===o.ATTACK?t=s.Resources.swordSound:p.cardType===o.COIN?t=s.Resources.coinSound:p.cardType===o.POTION&&(t=s.Resources.potionSound),d.default.get().playSoundInterrupt(t)},p.cardType=l,p.passedInOnClick=a,p.row=r,p.col=i,p.flipped=!1,p.texture=f;var g=e.calcCardDimensions(2*n.y,2*n.x);return p.baseSprite=e.sprite(s.Resources.card,g.scale),p.addDrawing("base",p.baseSprite),p.addDrawing("flip",e.sprite(p.texture,g.scale)),p.setWidth(g.width),p.setHeight(g.height),p.on("pointerup",p.fullOnClick),p.on("pointerenter",p.onEnter),p.on("pointerleave",p.onExit),p.x=e.calcX(i,g.width,n)+g.width,p.y=e.calcY(g.height,r,n)+g.height,p}return r(e,t),e.calcX=function(t,e,n){return n.x-l.default.get().getGameGridSize()/2*e-(l.default.get().getGameGridSize()-1)*s.Config.gridPadding/2+e*t+s.Config.gridPadding*t},e.calcY=function(t,e,n){return n.y+f.default.get().getMenuHeight()/2-l.default.get().getGameGridSize()/2*t-(l.default.get().getGameGridSize()-1)*s.Config.gridPadding/2+t*e+s.Config.gridPadding*e},e.calcCardDimensions=function(t,n){var i=s.Resources.card,r=i.height,o=i.width,a=t-f.default.get().getMenuHeight(),c=e.calcMaxCardHeight(a),d=e.calcMaxCardWidth(n),p=d/o;if(p*(r*(l.default.get().getGameGridSize()+1))>a){var g=c/r;return{width:o*g,height:c,scale:new u.Vector(g,g)}}return{width:d,height:r*p,scale:new u.Vector(p,p)}},e.calcMaxCardHeight=function(t){return.95*t/(l.default.get().getGameGridSize()+1)-s.Config.gridPadding},e.calcMaxCardWidth=function(t){return.95*t/(l.default.get().getGameGridSize()+1)-s.Config.gridPadding},e.sprite=function(t,e){var n=new u.Sprite(t,0,0,t.width,t.height);return n.scale=e,n},e.prototype.fullOnClick=function(){this.flipped||(this.silentSetFlipped(),d.default.get().playSoundInterrupt(s.Resources.cardSound,this.playSound),this.passedInOnClick())},e.prototype.silentSetFlipped=function(){this.flipped=!0,this.setDrawing("flip")},e.prototype.type=function(){return this.cardType},e.prototype.getRow=function(){return this.row},e.prototype.getCol=function(){return this.col},e.prototype.isFlipped=function(){return this.flipped},e.skeleton=function(t,n,i,r){return new e(t,i,n,r,a.Color.White,o.SKELETON,s.Resources.skull)},e.potion=function(t,n,i,r){return new e(t,i,n,r,a.Color.Red,o.POTION,s.Resources.potion)},e.attack=function(t,n,i,r){return new e(t,i,n,r,a.Color.Gray,o.ATTACK,s.Resources.sword)},e.coin=function(t,n,i,r){return new e(t,i,n,r,a.Color.Yellow,o.COIN,s.Resources.coin)},e.create=function(t,n,i,r,a,s){var u;return a===o.SKELETON?u=e.skeleton(t,n,i,r.skeletonCardCallback):a===o.ATTACK?u=e.attack(t,n,i,r.attackCardCallback):a===o.COIN?u=e.coin(t,n,i,r.coinCardCallback):a===o.POTION&&(u=e.potion(t,n,i,r.potionCardCallback)),s&&u.silentSetFlipped(),u},e}(a.Actor);e.Card=p},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=function(){function t(t,e,n,i,r){this.gridSize=t,this.grid=e,this.hearts=n,this.swords=i,this.coins=r}return t.prototype.getGridSize=function(){return this.gridSize},t.prototype.getGridState=function(){return this.grid},t.prototype.getHearts=function(){return this.hearts},t.prototype.getSwords=function(){return this.swords},t.prototype.getCoins=function(){return this.coins},t.prototype.toSaveState=function(){var t=i.Stream.ofValues.apply(i.Stream,this.grid).map(function(t){return i.Stream.ofValues.apply(i.Stream,t).map(function(t){return t.toSaveState()}).toArray()}).toArray();return{hearts:this.getHearts(),swords:this.getSwords(),coins:this.getCoins(),gridSize:this.getGridSize(),grid:t}},t.fromSaveState=function(e){var n=i.Stream.ofValues.apply(i.Stream,e.grid).map(function(t){return i.Stream.ofValues.apply(i.Stream,t).map(function(t){return o.fromSaveState(t)}).toArray()}).toArray();return new t(e.gridSize,n,e.hearts,e.swords,e.coins)},t}();e.GridState=r;var o=function(){function t(t,e){this.type=t,this.flipped=e}return t.prototype.getType=function(){return this.type},t.prototype.isFlipped=function(){return this.flipped},t.prototype.toSaveState=function(){return{type:this.type,flipped:this.flipped}},t.fromSaveState=function(e){return new t(e.type,e.flipped)},t}();e.CardState=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=function(){function t(t,e,n,i){this.difficultyLevel=t,this.buffFactor=n,this.skeletonFactor=e,this.difficultyName=i}return t.prototype.getSkeletonFactor=function(){return this.skeletonFactor},t.prototype.getBuffFactor=function(){return this.buffFactor},t.prototype.getDifficultyLevel=function(){return this.difficultyLevel},t.getByDifficultyLevel=function(t){return i.Stream.of([this.VERY_EASY,this.EASY,this.NORMAL,this.HARD,this.VERY_HARD]).filter(function(e){return e.getDifficultyLevel()===t}).findFirst().orElseThrow(function(){return new Error("Difficulty not found for that number")})},t.VERY_EASY=new t(1,3,0,"Very Easy"),t.EASY=new t(2,2.5,0,"Easy"),t.NORMAL=new t(3,2.5,1,"Normal"),t.HARD=new t(4,2,1,"Hard"),t.VERY_HARD=new t(5,2,2,"Very Hard"),t}();e.Difficulty=r},,,,,,,,,,,,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(124),a=n(17),s=n(35),u=n(3),c=n(12),d=n(34),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onInitialize=function(t){this.engine=t,this.add(s.default.getDefaultTileMap(t)),this.add(new d.ExitButton(t,function(){return t.goToScene(c.Scenes.MAIN_MENU)})),this.coordinator=o.GameCoordinator.initialize(this.engine)},e.prototype.onActivate=function(){var t=this;a.default.get().backgroundMusicStart(),this.coordinator.getAllActors().forEach(function(e){return t.add(e)})},e.prototype.onDeactivate=function(){var t=this;this.coordinator.getAllActors().forEach(function(e){return t.remove(e)})},e}(u.Scene);e.GameWindowBase=l},,,,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(33),s=n(140),u=n(65),c=n(4),d=n(19),l=n(68),f=n(73),p=n(72),g=n(74),h=n(76),y=n(70),S=n(69),w=n(75),b={p:{padding:"16px",margin:"0px",fontSize:20,flex:1,textAlign:"center"},h1:{textAlign:"center"},holder:{width:"100%"},imgHolder:{width:"100%",textAlign:"center"},cardImg:{width:100}},m=function(){function t(t){var e=this;this.setOpenAndRerender=function(t,n){e.isOpen=t,e.render({innerStuff:n,open:e.isOpen,closeFunc:function(){return e.setOpenAndRerender(!1)}})},this.render=function(t){u.render(a.createElement(v,o({},t)),document.getElementById("modal"))},this.isOpen=t}return t.get=function(){return this.singleton||(this.singleton=new t(!1)),this.singleton},t.prototype.upgradeModal=function(t,e){var n=a.createElement("div",{style:b.holder},a.createElement("h1",{style:b.h1},t.title),a.createElement("h2",{style:b.h1},"Price to Upgrade: ",t.price),a.createElement("h2",{style:b.h1},"Current Level: ",t.currentLevel),a.createElement("p",{style:b.p},t.description),a.createElement("div",{style:b.h1},d.default.get().getTotalCoins()>t.price?a.createElement("button",{onClick:this.onClickAndClose(e)},"BUY"):a.createElement("p",{style:b.p},"Not Enough Coins")));this.setOpenAndRerender(!0,n)},t.prototype.onClickAndClose=function(t){var e=this;return function(){t(),e.setOpenAndRerender(!1)}},t.prototype.introModal=function(){var t=a.createElement("div",null,a.createElement("h1",{style:b.h1},"Introduction"),a.createElement("p",{style:b.p},"Welcome to Skeleton Flip!"),a.createElement("p",{style:b.p},"Flip cards, find coins, drink potions and kill skeletons. The goal of the game is to flip all the cards on the board without running out of hearts."),a.createElement("p",{style:b.p},"In Story Mode, you progress through increasingly larger and larger grids, you can unlock larger grid sizes and harder difficulties by collecting coins and unlocking upgrades."),a.createElement("p",{style:b.p},"If Story Mode is disabled, you may choose to practice any grid size you like."));this.setOpenAndRerender(!0,t)},t.prototype.howToPlayModal=function(){var t=a.createElement("div",null,a.createElement("h1",{style:b.h1},"How To Play"),a.createElement("p",{style:b.p},"The top right of the game screen shows your health (",a.createElement("img",{width:20,src:y,alt:"heart"}),") and current attack (",a.createElement("img",{width:20,src:S,alt:"sword"}),"). If you run out of health you lose!"),a.createElement("div",{style:b.imgHolder},a.createElement("img",{width:b.cardImg.width,src:w,alt:"three"})),a.createElement("p",{style:b.p},"The numbers on the outer edges of the grid indicate how many skeletons are hiding in that row or column."),a.createElement("p",{style:b.p},"Tap cards inside the grid to flip them over. Remember you need to flip every card in the grid to advance, so choose your path wisely!"));this.setOpenAndRerender(!0,t)},t.prototype.cardModal=function(){var t=a.createElement("div",{style:b.holder},a.createElement("h1",{style:b.h1},"Cards"),a.createElement("div",{style:b.imgHolder},a.createElement("img",{width:b.cardImg.width,src:f,alt:"skull"})),a.createElement("p",{style:b.p},"Oh no! Flipping over a skeleton card will hurt you, taking away one health unless you have a sword to defend yourself."),a.createElement("div",{style:b.imgHolder},a.createElement("img",{width:b.cardImg.width,src:p,alt:"sword"})),a.createElement("p",{style:b.p},"Sweep Low! Flipping over a sword card will add to your attack count, no need to fear the next skeleton you flip over, the sword will take care of it!"),a.createElement("div",{style:b.imgHolder},a.createElement("img",{width:b.cardImg.width,src:g,alt:"potion"})),a.createElement("p",{style:b.p},"Tastes like Strawberry! Flipping over a potion card will heal any wounds that you have taken from those nasty skeletons."),a.createElement("div",{style:b.imgHolder},a.createElement("img",{width:b.cardImg.width,src:h,alt:"coin"})),a.createElement("p",{style:b.p},"Take that to the bank! Flipping over a coin card will add to your riches, if you complete a level you will keep the coins you found and can use them for upgrades."));this.setOpenAndRerender(!0,t)},t.prototype.textModal=function(t,e){var n=a.createElement("div",{style:b.holder},a.createElement("h1",{style:b.h1},t),a.createElement("p",{style:b.p},e),a.createElement("button",{onClick:function(){return d.default.get().clearStorage()}},"Clear Storage [Dev Tool]"),a.createElement("button",{onClick:function(){return d.default.get().setTotalCoins(d.default.get().getTotalCoins()+10)}},"Add 10 coins [Dev Tool]"));this.setOpenAndRerender(!0,n)},t}();e.ModalRenderer=m;var v=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.render=function(){return a.createElement(s,{style:{content:{borderRadius:"0px",backgroundColor:"#a77600",borderWidth:8,borderColor:"#402f08",padding:"16px"}},appElement:document.getElementById("modal"),isOpen:this.props.open},a.createElement("div",{style:{float:"right",height:c.Config.exitButtonSize,position:"fixed",right:"24px",top:"24px"}},a.createElement("a",{style:{}},a.createElement("img",{height:c.Config.exitButtonSize,width:c.Config.exitButtonSize,src:l,alt:"exit",onPointerUp:this.props.closeFunc}))),a.createElement("div",{style:{borderRadius:"16px",borderStyle:"solid",borderWidth:"4px",minHeight:"95%",backgroundColor:"#896000",borderColor:"#402f08",display:"flex"}},this.props.innerStuff))},e}(a.Component);e.default=v},function(t,e,n){t.exports=n.p+"7bc9ef00f9c3eac4ed90e0f78fe053f4.png"},function(t,e,n){t.exports=n.p+"78b5b4973f64552277b581a279a72a42.png"},function(t,e,n){t.exports=n.p+"8c33cba37ae9cda19c0c4706219cd540.png"},function(t,e,n){t.exports=n.p+"60875f949f42a486e64184bc743af777.png"},function(t,e,n){t.exports=n.p+"0cfb30ca844b8dc2e00ca6a6b6125ca5.png"},function(t,e,n){t.exports=n.p+"bfc4eed12d62bc8834e80f5ad6a79e14.png"},function(t,e,n){t.exports=n.p+"17b342f332f5ab3ea92edee594cc0ff7.png"},function(t,e,n){t.exports=n.p+"2a3f5e19c5b2efd0462fb7cc1b704558.png"},function(t,e,n){t.exports=n.p+"c150a67e689f09935b6d97e1989f8b56.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(16),o=n(67),a=n(4),s=n(22),u=n(6),c=function(){function t(t,e,n,o,c,d,l){var f=this;this.upgradeDetails=d,this.purchaseOnClick=l,this.tileButton=new r.default(o,function(){return f.modalOnClick()}),this.tileButton.x=t,this.tileButton.y=e,this.tileButton.scale=n.scale,this.tileButton.setHeight(n.height),this.tileButton.setWidth(n.width),this.label=new i.Label(c,this.tileButton.getRight()+a.Config.gridPadding,e,null,s.default.get().getMono()),this.label.fontSize=u.default.get().getUIItemSize(),this.label.baseAlign=i.BaseAlign.Middle,this.label.textAlign=i.TextAlign.Left}return t.prototype.modalOnClick=function(){o.ModalRenderer.get().upgradeModal(this.upgradeDetails,this.purchaseOnClick)},t.prototype.getDrawables=function(){return[this.label,this.tileButton]},t.prototype.getBottom=function(){return this.tileButton.getBottom()},t.prototype.updateDetails=function(t){this.upgradeDetails=t},t}();e.default=c},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),a=n(3),s=n(34),u=n(36),c=n(22),d=n(19),l=n(6),f=n(18),p=n(4),g=n(116),h=n(47),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onInitialize=function(t){var e=this,n=this.title();this.coinsLabel=this.playercoinsLabel(t.drawWidth/2,n.getBottom()+p.Config.optionPadding);var i=l.default.get().getUIButtonSizing(),r=f.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,p.Resources.gridTile,i.padding,i.maxScale);this.maxGrid=new g.default(t.drawWidth/3,this.coinsLabel.getBottom()+100,r,p.Resources.gridTile,"Grid Size",p.Upgrades.gridSize.getDetails(d.default.get().getMaxGridSize()),function(){var t=d.default.get(),n=t.getTotalCoins(),i=t.getMaxGridSize();t.setTotalCoins(n-p.Upgrades.gridSize.getDetails(i).price),t.setMaxGridSize(i+1),e.onActivate()}),this.maxDiff=new g.default(t.drawWidth/3,this.maxGrid.getBottom()+2*p.Config.optionPadding,r,p.Resources.difficultyTile,"Difficulty",p.Upgrades.difficulty.getDetails(d.default.get().getMaxDiff().getDifficultyLevel()),function(){var t=d.default.get(),n=t.getTotalCoins(),i=t.getMaxDiff().getDifficultyLevel();t.setTotalCoins(n-p.Upgrades.difficulty.getDetails(i).price),t.setMaxDiff(h.Difficulty.getByDifficultyLevel(i+1)),e.onActivate()}),this.add(new s.ExitButton(t,function(){return t.goToScene(o.Scenes.MAIN_MENU)})),this.add(n),this.add(this.coinsLabel),this.maxGrid.getDrawables().forEach(function(t){return e.add(t)}),this.maxDiff.getDrawables().forEach(function(t){return e.add(t)}),this.initScroll(0),this.setBackround(t.drawHeight)},e.prototype.title=function(){var t=f.calcDimensionsSingleObjectTexture(this.engine.drawHeight,this.engine.drawWidth,p.Resources.upgradeTitle,.6,1),e=p.Resources.upgradeTitle.asSprite(),n=new a.Actor;return n.addDrawing(e),n.x=this.engine.drawWidth/2,n.y=t.height/2+p.Config.gridPadding,n.setHeight(t.height),n.setWidth(t.width),n.scale=t.scale,n},e.prototype.playercoinsLabel=function(t,e){var n=d.default.get().getTotalCoins(),i=new a.Label(this.coinsLabelString(n),t,e,null,c.default.get().getMono());return i.fontSize=l.default.get().getUIItemSize(),i.baseAlign=a.BaseAlign.Middle,i.textAlign=a.TextAlign.Center,i},e.prototype.coinsLabelString=function(t){return"Current Coins: "+t},e.prototype.onActivate=function(){var t=d.default.get();this.coinsLabel.text=this.coinsLabelString(d.default.get().getTotalCoins()),this.maxGrid.updateDetails(p.Upgrades.gridSize.getDetails(t.getMaxGridSize())),this.maxDiff.updateDetails(p.Upgrades.difficulty.getDetails(t.getMaxDiff().getDifficultyLevel()))},e.prototype.onDeactivate=function(){},e}(u.default);e.UpgradeScene=y},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(61),a=n(11),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onInitialize=function(e){t.prototype.onInitialize.call(this,e),this.currentOptionGridSize=a.default.get().getOptionGridSize()},e.prototype.onActivate=function(){var e=a.default.get().getOptionGridSize();this.currentOptionGridSize!=e&&(this.currentOptionGridSize=e,this.coordinator.resetGame(!0)),t.prototype.onActivate.call(this)},e}(o.GameWindowBase);e.GridGameWindow=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(4),o=n(6),a=n(22),s=function(){function t(t,e,n){this.coinCount=t,this.coinIcon=e,this.countLabel=n}return t.create=function(e,n,i){var o=t.createCoinIcon(e,n);return new t(i,o,t.createCountLabel(i,o.getRight()+r.Config.gridPadding,n))},t.prototype.getCoinCount=function(){return this.coinCount},t.prototype.addToCoinCount=function(t){this.coinCount=this.coinCount+t,this.countLabel.text=""+this.coinCount},t.prototype.drawables=function(){return[this.coinIcon,this.countLabel]},t.createCoinIcon=function(t,e){var n=r.Resources.uiCoins,a=new i.Sprite(n,0,0,n.width,n.height),s=new i.Vector(o.default.get().getUIItemSize()/n.width,o.default.get().getUIItemSize()/n.height),u=new i.Actor(t,e,n.width,n.height);return u.addDrawing(a),u.scale=s,u},t.createCountLabel=function(t,e,n){var r=new i.Label(""+t,e,n,null,a.default.get().getMono());return r.fontSize=.7*o.default.get().getUIItemSize(),r.baseAlign=i.BaseAlign.Middle,r.textAlign=i.TextAlign.Left,r.color=i.Color.fromHex("#958a2d"),r},t}();e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=n(44),u=n(11),c=n(6),d=function(t){function e(n,i,r,o){var u=t.call(this)||this;u.type=n,u.index=i,u.screenCenter=r;var c=s.Card.calcCardDimensions(2*r.y,2*r.x);return u.addDrawing("0",e.sprite(a.Resources[0],c.scale)),u.addDrawing("1",e.sprite(a.Resources[1],c.scale)),u.addDrawing("2",e.sprite(a.Resources[2],c.scale)),u.addDrawing("3",e.sprite(a.Resources[3],c.scale)),u.addDrawing("4",e.sprite(a.Resources[4],c.scale)),u.addDrawing("5",e.sprite(a.Resources[5],c.scale)),u.addDrawing("6",e.sprite(a.Resources[6],c.scale)),u.addDrawing("7",e.sprite(a.Resources[7],c.scale)),u.addDrawing("8",e.sprite(a.Resources[8],c.scale)),u.addDrawing("9",e.sprite(a.Resources[9],c.scale)),u.setWidth(c.width),u.setHeight(c.height),u.x=e.calcX(n,i,r,c.width)+c.width,u.y=e.calcY(n,i,r,c.height)+c.height,u.setCount(o),u}return r(e,t),e.calcX=function(t,e,n,i){var r=n.x-u.default.get().getGameGridSize()/2*i-i-(u.default.get().getGameGridSize()+1)*a.Config.gridPadding/2;return"row"===t?r:r+i+i*e+a.Config.gridPadding*(e+1)},e.calcY=function(t,e,n,i){var r=n.y+c.default.get().getMenuHeight()/2-u.default.get().getGameGridSize()/2*i-i-(u.default.get().getGameGridSize()+1)*a.Config.gridPadding/2;return"col"===t?r:r+i+i*e+a.Config.gridPadding*(e+1)},e.sprite=function(t,e){var n=t.asSprite().clone();return n.scale=e,n},e.prototype.setCount=function(t){return this.setDrawing(""+t),this},e}(o.Actor);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(44),r=n(14),o=n(3),a=n(11),s=n(46),u=function(){function t(e,n,i){this.skeletonCount=0,this.potionCount=0,this.swordCount=0,this.gridSize=n,this.grid=t.blankGrid(n,e,i)}return t.createGridFromState=function(e,n,i,r){return i.map(function(n){return t.loadSavedGrid(e,r,n)}).orElseGet(function(){return t.createNewGrid(e,n,r)})},t.createNewGrid=function(e,n,i){var r=new o.Vector(i.drawWidth/2,i.drawHeight/2),a=new t(e,n,r);return a.initializeSkeletons(r,e.skeletonCardCallback),a.initializeBuffs(r,e),a},t.prototype.currentGridState=function(){var t=r.Stream.ofValues.apply(r.Stream,this.grid).map(function(t){return r.Stream.ofValues.apply(r.Stream,t).map(function(t){return new s.CardState(t.type(),t.isFlipped())}).toArray()}).toArray();return{gridSize:this.gridSize,cardState:t}},t.prototype.getGridAsList=function(){return r.Stream.of(this.grid).flatMap(function(t){return r.Stream.ofValues.apply(r.Stream,t)}).toArray()},t.prototype.getRow=function(t){return r.Stream.of(this.grid).flatMap(function(t){return r.Stream.ofValues.apply(r.Stream,t)}).filter(function(e){return e.getRow()==t}).toArray()},t.prototype.getCol=function(t){return r.Stream.of(this.grid).flatMap(function(t){return r.Stream.ofValues.apply(r.Stream,t)}).filter(function(e){return e.getCol()==t}).toArray()},t.blankGrid=function(t,e,n){var i=this;return r.Stream.range(0,t).map(function(r){return i.blankGridRow(t,r,e,n)}).toArray()},t.blankGridRow=function(t,e,n,o){return r.Stream.range(0,t).map(function(t){return i.Card.coin(o,e,t,n.coinCardCallback)}).toArray()},t.prototype.initializeSkeletons=function(t,e){for(;this.needMoreSkeletons();){var n=this.randomCoord(),r=n.row,o=n.col;this.isCardACoin(r,o)&&this.insertCard(r,o,i.Card.skeleton(t,r,o,e))}},t.prototype.initializeBuffs=function(t,e){for(;this.needMoreBuffs();){var n=this.randomCoord(),i=n.row,r=n.col;this.isCardACoin(i,r)&&this.insertCard(i,r,this.generateBuffCard(i,r,t,e))}},t.prototype.initializeFromState=function(t,e,n){var r=this;this.gridSize=t.getGridSize(),t.getGridState().forEach(function(t,o){t.forEach(function(t,a){var s=i.Card.create(e,o,a,n,t.getType(),t.isFlipped());r.insertCard(o,a,s)})})},t.prototype.generateBuffCard=function(t,e,n,r){return Math.random()<.5?i.Card.attack(n,t,e,r.attackCardCallback):i.Card.potion(n,t,e,r.potionCardCallback)},t.prototype.insertCard=function(t,e,n){n.type()==i.CardType.SKELETON?this.skeletonCount++:n.type()==i.CardType.ATTACK?this.swordCount++:n.type()==i.CardType.POTION&&this.potionCount++,this.grid[t][e]=n},t.prototype.isCardACoin=function(t,e){return this.grid[t][e].type()==i.CardType.COIN},t.prototype.needMoreSkeletons=function(){return this.skeletonCount<Math.ceil(this.gridSize*this.gridSize/a.default.get().getSkullFactor())},t.prototype.needMoreBuffs=function(){return this.potionCount+this.swordCount<this.skeletonCount-a.default.get().getBuffFactor()},t.prototype.randomCoord=function(){return{row:Math.floor(Math.random()*this.gridSize),col:Math.floor(Math.random()*this.gridSize)}},t.loadSavedGrid=function(e,n,i){var r=new o.Vector(n.drawWidth/2,n.drawHeight/2),a=new t(e,i.getGridSize(),r);return a.initializeFromState(i,r,e),a},t}();e.GridCoordinator=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(6),s=function(t){function e(e,n,i,r){var s=t.call(this)||this;return s.x=n,s.y=i,s.sprite=new o.Sprite(r,0,0,r.width,r.height),s.scale=new o.Vector(a.default.get().getUIItemSize()/r.width,a.default.get().getUIItemSize()/r.height),s.addDrawing(s.sprite),s.setEnabled(e),s}return r(e,t),e.prototype.setEnabled=function(t){return this.enabled=t,this.sprite.clearEffects(),t?this.sprite.opacity(1):this.sprite.opacity(e.DISABLED_OPACITY),this},e.prototype.isEnabled=function(){return this.enabled},e.DISABLED_OPACITY=.5,e}(o.Actor);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=n(122),o=n(6),a=function(){function t(t,e,n,i){this.current=e,this.max=t,this.onZero=n,this.statActors=i}return t.create=function(e,n,a,s,u,c){var d=c||0,l=i.Stream.range(0,a).map(function(t){return t>d-1?new r.default(!1,e+t*o.default.get().getUIItemSize(),n,u):new r.default(!0,e+t*o.default.get().getUIItemSize(),n,u)}).toArray();return new t(a,d,s,l)},t.prototype.add=function(t){return this.current+t>this.max?this.current=this.max:this.current=this.current+t,this.statActors[this.current-1].setEnabled(!0),this.current},t.prototype.subtract=function(t){return this.current-t<=0?(this.current=0,this.onZero()):this.current=this.current-t,this.statActors[this.current].setEnabled(!1),this.current},t.prototype.getCurrent=function(){return this.current},t.prototype.getStatActors=function(){return this.statActors},t}();e.NumberCoordinator=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(123),r=n(44),o=n(4),a=n(14),s=n(121),u=n(3),c=n(12),d=n(120),l=n(11),f=n(6),p=n(19),g=n(46),h=n(119),y=function(){function t(t){var e=this;this.updateLabels=function(){e.rowCounts.forEach(function(t,n){t.setCount(e.skeletonCountForRow(n))}),e.columnCounts.forEach(function(t,n){t.setCount(e.skeletonCountForCol(n))})},this.skeletonCardCallback=function(){e.attackCoordinator.getCurrent()>0?e.attackCoordinator.subtract(1):e.healthCoordinator.subtract(1),e.updateLabels(),e.saveGridProgress(),e.checkIfCompleteGame()},this.coinCardCallback=function(){e.coinCount.addToCoinCount(1),e.saveGridProgress(),e.checkIfCompleteGame()},this.attackCardCallback=function(){e.attackCoordinator.add(1),e.saveGridProgress(),e.checkIfCompleteGame()},this.potionCardCallback=function(){e.healthCoordinator.add(1),e.saveGridProgress(),e.checkIfCompleteGame()},this.engine=t,this.resetGame(!1)}return t.initialize=function(e){return new t(e)},t.prototype.resetGame=function(t){var e=f.default.get(),n=p.default.get().getGridState();this.healthCoordinator=i.NumberCoordinator.create(e.getUIItemSize()/2,e.getUIItemSize()/2,o.Config.maxHealth,function(){},o.Resources.uiHeart,n.map(function(t){return t.getHearts()}).orElse(o.Config.maxHealth)),this.attackCoordinator=i.NumberCoordinator.create(e.getUIItemSize()/2,1.5*e.getUIItemSize(),o.Config.maxAttack,function(){},o.Resources.uiSword,n.map(function(t){return t.getSwords()}).orElse(0)),this.coinCount=h.default.create(e.getUIItemSize()/2,2.5*e.getUIItemSize(),n.map(function(t){return t.getCoins()}).orElse(0)),this.gridCoordinator=t?s.GridCoordinator.createNewGrid(this,l.default.get().getGameGridSize(),this.engine):s.GridCoordinator.createGridFromState(this,l.default.get().getGameGridSize(),n,this.engine),this.rowCounts=this.createRowCountCards(),this.columnCounts=this.createColCountCards()},t.prototype.getStatTrackers=function(){return this.healthCoordinator.getStatActors().concat(this.attackCoordinator.getStatActors())},t.prototype.getRowCountCards=function(){return this.rowCounts},t.prototype.getColCountCards=function(){return this.columnCounts},t.prototype.createColCountCards=function(){var t=this,e=new u.Vector(this.engine.drawWidth/2,this.engine.drawHeight/2);return a.Stream.of(this.gridCoordinator.getRow(0)).map(function(n){return new d.default("col",n.getCol(),e,t.skeletonCountForCol(n.getCol()))}).toArray()},t.prototype.createRowCountCards=function(){var t=this,e=new u.Vector(this.engine.drawWidth/2,this.engine.drawHeight/2);return a.Stream.of(this.gridCoordinator.getCol(0)).map(function(n){return new d.default("row",n.getRow(),e,t.skeletonCountForRow(n.getRow()))}).toArray()},t.prototype.skeletonCountForRow=function(t){return a.Stream.of(this.gridCoordinator.getRow(t)).filter(function(t){return!t.isFlipped()}).filter(function(t){return t.type()==r.CardType.SKELETON}).count()},t.prototype.skeletonCountForCol=function(t){return a.Stream.of(this.gridCoordinator.getCol(t)).filter(function(t){return!t.isFlipped()}).filter(function(t){return t.type()==r.CardType.SKELETON}).count()},t.prototype.getGridAsList=function(){return this.gridCoordinator.getGridAsList()},t.prototype.getAllActors=function(){return a.Stream.ofValues(this.gridCoordinator.getGridAsList(),this.getColCountCards(),this.getRowCountCards(),this.getStatTrackers(),l.default.get().isProgressionDisabled()?[]:this.coinCount.drawables()).flatMap(function(t){return a.Stream.ofValues.apply(a.Stream,t)}).toArray()},t.prototype.checkIfCompleteGame=function(){var t=a.Stream.of(this.getGridAsList()).allMatch(function(t){return t.isFlipped()});0===this.healthCoordinator.getCurrent()?this.gameOver():t&&this.healthCoordinator.getCurrent()>0&&this.victory()},t.prototype.gameOver=function(){this.engine.goToScene(c.Scenes.GAME_OVER),l.default.get().resetProgress(),p.default.get().saveGridState(),this.resetGame(!0)},t.prototype.victory=function(){var t=p.default.get(),e=l.default.get();this.engine.goToScene(c.Scenes.VICTORY),e.progress(),t.saveGridState(),e.isProgressionDisabled()||t.setTotalCoins(t.getTotalCoins()+this.coinCount.getCoinCount()),this.resetGame(!0)},t.prototype.saveGridProgress=function(){var t=this.gridCoordinator.currentGridState();p.default.get().saveGridState(new g.GridState(t.gridSize,t.cardState,this.healthCoordinator.getCurrent(),this.attackCoordinator.getCurrent(),this.coinCount.getCoinCount()))},t}();e.GameCoordinator=y},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(22),s=n(11),u=function(t){function e(n,i,r,s){var u=t.call(this,e.createLabelText(s),n,i,null,a.default.get().getMono())||this;return u.fontSize=r,u.baseAlign=o.BaseAlign.Middle,u.textAlign=o.TextAlign.Center,u}return r(e,t),e.createLabelText=function(t){return s.default.get().isProgressionDisabled()?"":e.PREFIX+" "+t},e.prototype.updateLevel=function(t){this.text=e.createLabelText(t)},e.PREFIX="Level",e}(o.Label);e.default=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(125),a=n(11),s=n(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onInitialize=function(e){t.prototype.onInitialize.call(this,e);var n=s.default.get();this.levelDisplay=new o.default(e.drawWidth/2,n.getMenuHeight()-n.getUIItemSize()/2,n.getUIItemSize(),a.default.get().getLevelString()),this.add(this.levelDisplay)},e.prototype.onActivate=function(){t.prototype.onActivate.call(this),this.levelDisplay.updateLevel(a.default.get().getLevelString())},e}(n(61).GameWindowBase);e.StoryGameWindow=u},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(12),s=n(3),u=n(16),c=n(18),d=n(34),l=n(67),f=n(6),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modalRenderer=l.ModalRenderer.get(),e}return r(e,t),e.prototype.onInitialize=function(t){var e=this;this.add(new d.ExitButton(t,function(){return t.goToScene(a.Scenes.MAIN_MENU)}));var n=c.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,o.Resources.helpTitle,.6,1),i=new s.Actor(t.drawWidth/2,n.height/2+o.Config.gridPadding,n.width,n.height);i.addDrawing(o.Resources.helpTitle),i.scale=n.scale,this.add(i);var r=t.drawWidth/2,u=f.default.get().getUIButtonSizing(),l=c.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,o.Resources.introMenu,u.padding,u.maxScale),p=this.createButton(l,r,i.getBottom()+l.height/2+o.Config.optionPadding,o.Resources.introMenu,function(){return e.modalRenderer.introModal()}),g=this.createButton(l,r,p.getBottom()+o.Config.gridPadding+l.height/2,o.Resources.playingMenu,function(){return e.modalRenderer.howToPlayModal()}),h=this.createButton(l,r,g.getBottom()+o.Config.gridPadding+l.height/2,o.Resources.cardMenu,function(){return e.modalRenderer.cardModal()}),y=this.createButton(l,r,h.getBottom()+o.Config.gridPadding+l.height/2,o.Resources.creditsMenu,function(){return e.modalRenderer.textModal("Credits","Made by Andrew")});this.add(p),this.add(g),this.add(h),this.add(y),this.initScroll(y.getBottom()),this.setBackround(y.getBottom())},e.prototype.createButton=function(t,e,n,i,r){var o=new u.default(i,r);return o.x=e,o.y=n,o.scale=t.scale,o.setHeight(t.height),o.setWidth(t.width),o},e.prototype.onActivate=function(){},e.prototype.onDeactivate=function(){},e}(n(36).default);e.Help=p},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=n(32),u=n(14),c=n(17),d=function(t){function e(e,n,i,r,c){var d=t.call(this)||this;return d.onDown=function(){d.currentSprite().clearEffects(),d.currentSprite().addEffect(new s.Darken(.2))},d.onEnter=function(){d.currentSprite().clearEffects(),d.currentSprite().addEffect(new s.Darken(.1))},d.onExit=function(){d.currentSprite().clearEffects()},d.toggleButton=function(){d.checked=!d.checked,d.setCheckedDrawing(),d.onToggle.ifPresent(function(t){return t(d.checked)})},d.checked=r,d.checkedSprite=new o.Sprite(a.Resources.uiX,0,0,a.Resources.uiX.width,a.Resources.uiX.height),d.uncheckedSprite=new o.Sprite(a.Resources.uiBlank,0,0,a.Resources.uiBlank.width,a.Resources.uiBlank.height),d.scale=new o.Vector(e/a.Resources.uiX.width,e/a.Resources.uiX.height),d.setHeight(e),d.setWidth(e),d.x=n,d.y=i,d.onToggle=u.Optional.ofNullable(c),d.addDrawing("checked",d.checkedSprite),d.addDrawing("unchecked",d.uncheckedSprite),d.checked?d.setDrawing("checked"):d.setDrawing("unchecked"),d.on("pointerdown",d.onDown),d.on("pointerenter",d.onEnter),d.on("pointerleave",d.onExit),d.on("pointerup",d.onClickWrapper(d.toggleButton)),d}return r(e,t),e.prototype.setOnToggle=function(t){this.onToggle=u.Optional.of(t)},e.prototype.isChecked=function(){return this.checked},e.prototype.setChecked=function(t){this.checked=t,this.setCheckedDrawing()},e.prototype.onClickWrapper=function(t){var e=this;return function(n){"pointerup"===n.ev.type&&(e.currentSprite().clearEffects(),c.default.get().playSoundInterrupt(a.Resources.buttonSound),t(),e.onEnter())}},e.prototype.currentSprite=function(){return this.checked?this.checkedSprite:this.uncheckedSprite},e.prototype.setCheckedDrawing=function(){this.checked?this.setDrawing("checked"):this.setDrawing("unchecked")},e}(o.Actor);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(143),r=n(3),o=n(22),a=function(){function t(t,e,n,a,s,u,c){var d=e-.25*e,l=e+.25*e;this.label=new r.Label(t,n,a,null,o.default.get().getMono()),this.label.fontSize=d,this.label.baseAlign=r.BaseAlign.Middle,this.label.textAlign=r.TextAlign.Center;var f=this.label.getTextWidth(u.ctx);this.label.x=n-f/3,this.radio=new i.default(l,n+.75*f,a,s,c)}return t.prototype.addOnToggle=function(t){this.radio.setOnToggle(t)},t.prototype.setChecked=function(t){this.radio.setChecked(t)},t.prototype.isChecked=function(){return this.radio.isChecked()},t.prototype.getBottom=function(){return Math.max(this.radio.getBottom(),this.label.getBottom())},t.prototype.getDrawables=function(){return[this.radio,this.label]},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(4),o=n(16),a=n(22),s=n(32),u=n(14),c=function(){function t(t,e,n,u,c,d,l,f){var p=this;this.updateDisabled=function(t){if(p.leftButtonSprite.clearEffects(),p.rightButtonSprite.clearEffects(),t){var e=i.Color.Gray;p.topLabel.color=e,p.numberLabel.color=e,p.leftButtonSprite.addEffect(new s.Colorize(e)),p.rightButtonSprite.addEffect(new s.Colorize(e)),p.leftButton.setDisabled(!0),p.rightButton.setDisabled(!0)}else p.topLabel.color=i.Color.Black,p.numberLabel.color=i.Color.Black,p.leftButton.setDisabled(!1),p.rightButton.setDisabled(!1)},this.labelText=t,this.min=e,this.max=n,this.current=u,this.fontSize=l;var g=this.fontSize-.25*this.fontSize,h=this.fontSize+.25*this.fontSize;this.topLabel=new i.Label(this.labelText,c,d-r.Config.gridPadding,null,a.default.get().getMono()),this.topLabel.fontSize=g,this.topLabel.baseAlign=i.BaseAlign.Middle,this.topLabel.textAlign=i.TextAlign.Center,this.numberLabel=new i.Label(""+u,c,d+h,null,a.default.get().getMono()),this.numberLabel.fontSize=g,this.numberLabel.baseAlign=i.BaseAlign.Middle,this.numberLabel.textAlign=i.TextAlign.Center,this.leftButton=new o.default(r.Resources.uiLeft,function(){return p.addBy(-1)}),this.leftButtonSprite=this.leftButton.getSprite(),this.leftButton.x=c-1.5*h,this.leftButton.y=d+h,this.leftButton.scale=new i.Vector(h/r.Resources.uiLeft.width,h/r.Resources.uiLeft.height),this.leftButton.setHeight(h),this.leftButton.setWidth(h),this.rightButton=new o.default(r.Resources.uiRight,function(){return p.addBy(1)}),this.rightButtonSprite=this.rightButton.getSprite(),this.rightButton.x=c+1.5*h,this.rightButton.y=d+h,this.rightButton.scale=new i.Vector(h/r.Resources.uiRight.width,h/r.Resources.uiRight.height),this.rightButton.setHeight(h),this.rightButton.setWidth(h),this.updateDisabled(f)}return t.prototype.addBy=function(t){var e=this.current+t;this.min<=e&&this.max>=e&&(this.current=e,this.numberLabel.text=""+e)},t.prototype.getCurrent=function(){return this.current},t.prototype.setCurrent=function(t,e){this.max=e,this.current=t,this.numberLabel.text=""+t},t.prototype.getBottom=function(){return u.Stream.ofValues(this.leftButton,this.rightButton,this.numberLabel).map(function(t){return t.getBottom()}).max().orElse(0)},t.prototype.getDrawables=function(){return[this.leftButton,this.rightButton,this.numberLabel,this.topLabel]},t}();e.default=c},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(12),s=n(3),u=n(145),c=n(11),d=n(144),l=n(6),f=n(18),p=n(19),g=n(34),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onConfirm=function(){c.default.get().setGridSize(e.gridSize.getCurrent()),c.default.get().setDifficulty(e.difficulty.getCurrent()),c.default.get().setProgressionDisabled(!e.progressionToggle.isChecked()),p.default.get().setIsSoundOff(!e.sound.isChecked()),e.engine.goToScene(a.Scenes.MAIN_MENU)},e}return r(e,t),e.prototype.onInitialize=function(t){var e=this,n=l.default.get().getUIItemSize();this.add(new g.ExitButton(t,function(){return t.goToScene(a.Scenes.MAIN_MENU)})),this.addTitle(),this.addSoundToggle(n),this.addDifficultySize(n),this.addProgressionToggle(n);var i=this.addGridSize(n);this.progressionToggle.addOnToggle(i);var r=l.default.get().getUIButtonSizing(),s=f.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,o.Resources.confirmMenu,r.padding,r.maxScale),u=this.gridSize.getBottom()<t.drawHeight-s.height?t.drawHeight-s.height/2-o.Config.optionPadding:this.gridSize.getBottom()+o.Config.optionPadding+s.height/2,c=this.createButton(s,t.drawWidth/2,u,o.Resources.confirmMenu,function(){return e.onConfirm()});this.add(c),this.initScroll(c.getBottom()),this.setBackround(c.getBottom())},e.prototype.addTitle=function(){var t=f.calcDimensionsSingleObjectTexture(this.engine.drawHeight,this.engine.drawWidth,o.Resources.optionTitle,.6,1),e=o.Resources.optionTitle.asSprite(),n=new s.Actor;n.addDrawing(e),n.x=this.engine.drawWidth/2,n.y=t.height/2+o.Config.gridPadding,n.setHeight(t.height),n.setWidth(t.width),n.scale=t.scale,this.title=n,this.add(n)},e.prototype.addSoundToggle=function(t){var e=this;this.sound=new d.default("Sound",t,this.engine.drawWidth/2,this.title.getBottom()+2*o.Config.optionPadding,!p.default.get().isSoundOff(),this.engine),this.sound.getDrawables().forEach(function(t){return e.add(t)})},e.prototype.addDifficultySize=function(t){var e=this;this.difficulty=new u.default("DIFFICULTY",1,p.default.get().getMaxDiff().getDifficultyLevel(),c.default.get().getDifficulty().getDifficultyLevel(),this.engine.drawWidth/2,this.sound.getBottom()+.5*t+o.Config.optionPadding,t,!1),this.difficulty.getDrawables().forEach(function(t){return e.add(t)})},e.prototype.addProgressionToggle=function(t){var e=this;this.progressionToggle=new d.default("Story Mode",t,this.engine.drawWidth/2,this.difficulty.getBottom()+1*t+o.Config.optionPadding,!c.default.get().isProgressionDisabled(),this.engine),this.progressionToggle.getDrawables().forEach(function(t){return e.add(t)})},e.prototype.addGridSize=function(t){var e=this;return this.gridSize=new u.default("GRID SIZE",2,p.default.get().getMaxGridSize(),c.default.get().getOptionGridSize(),this.engine.drawWidth/2,this.progressionToggle.getBottom()+.5*t+o.Config.optionPadding,t,!c.default.get().isProgressionDisabled()),this.gridSize.getDrawables().forEach(function(t){return e.add(t)}),this.gridSize.updateDisabled},e.prototype.onActivate=function(){this.sound.setChecked(!p.default.get().isSoundOff()),this.gridSize.setCurrent(c.default.get().getOptionGridSize(),p.default.get().getMaxGridSize()),this.difficulty.setCurrent(c.default.get().getDifficulty().getDifficultyLevel(),p.default.get().getMaxDiff().getDifficultyLevel()),this.progressionToggle.setChecked(!c.default.get().isProgressionDisabled())},e.prototype.onDeactivate=function(){},e}(n(36).default);e.Options=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=n(12),u=n(17),c=n(18),d=n(35),l=n(16),f=n(6),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onNext=function(){e.engine.goToScene(s.getGameWindow())},e}return r(e,t),e.prototype.onInitialize=function(t){this.engine=t,this.add(d.default.getDefaultTileMap(t));var e=f.default.get().getUIButtonSizing(),n=c.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,a.Resources.nextMenu,e.padding,e.maxScale),i=c.calcDimensionsSingleObjectTexture(this.engine.drawHeight,this.engine.drawWidth,a.Resources.victory,.8,1),r=n.height/2+a.Config.optionPadding,s=new o.Actor(this.engine.drawWidth/2,this.engine.drawHeight/2-r,i.width,i.height);s.addDrawing(a.Resources.victory.asSprite()),s.scale=i.scale,this.add(s);var u=new l.default(a.Resources.nextMenu,this.onNext);u.setHeight(n.height),u.setWidth(n.width),u.scale=n.scale,u.x=t.drawWidth/2,u.y=t.drawHeight-r,this.add(u)},e.prototype.onActivate=function(){u.default.get().playSoundInterrupt(a.Resources.victorySound)},e.prototype.onDeactivate=function(){},e}(o.Scene);e.Victory=p},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=n(12),u=n(17),c=n(18),d=n(35),l=n(16),f=n(6),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMenu=function(){e.engine.goToScene(s.Scenes.MAIN_MENU)},e}return r(e,t),e.prototype.onInitialize=function(t){this.engine=t,this.add(d.default.getDefaultTileMap(t));var e=c.calcDimensionsSingleObject(this.engine.drawHeight,this.engine.drawWidth,360,360,.8,1.5),n=f.default.get().getUIButtonSizing(),i=c.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,a.Resources.menuMenu,n.padding,n.maxScale),r=i.height/2+a.Config.optionPadding,s=new o.Actor,u=new o.SpriteSheet(a.Resources.gameOver,3,1,360,360).getAnimationForAll(this.engine,125);s.addDrawing("idle",u),this.add(s),s.x=this.engine.drawWidth/2,s.y=this.engine.drawHeight/2-r,s.setHeight(t.drawHeight),s.setWidth(t.drawWidth),s.scale=e.scale;var p=new l.default(a.Resources.menuMenu,this.onMenu);p.setHeight(i.height),p.setWidth(i.width),p.scale=i.scale,p.x=t.drawWidth/2,p.y=t.drawHeight-r,this.add(p)},e.prototype.onActivate=function(){u.default.get().playSoundInterrupt(a.Resources.laughSound)},e.prototype.onDeactivate=function(){a.Resources.laughSound.stop()},e}(o.Scene);e.GameOver=p},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(3),s=n(71),u=function(t){function e(){var e=t.call(this)||this;return e.backgroundColor=o.Config.backgroundColor.toString(),e.logo=s,e.logoHeight=234,e.logoWidth=1260,e}return r(e,t),e}(a.Loader);e.GameLoader=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(3),s=function(t){function e(){return t.call(this,{suppressConsoleBootMessage:!0,displayMode:a.DisplayMode.FullScreen,pointerScope:a.Input.PointerScope.Canvas,suppressPlayButton:!0,backgroundColor:a.Color.fromHex(o.Config.backgroundColor)})||this}return r(e,t),e.prototype.start=function(e){return t.prototype.start.call(this,e)},e}(a.Engine);e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=function(t){function e(e){var n=t.call(this)||this;return n.isDragging=!1,n.scrollBarBotton=e.drawHeight/2,n.scrollBarTop=e.drawHeight/2,a.Resources.uiScroll.asSprite(),n.x=e.drawWidth-25,n.y=e.drawHeight/2,n.addDrawing(a.Resources.uiScroll.asSprite()),n.setWidth(50),n.setHeight(50),n.scale=new o.Vector(50/192,50/192),n.on("pointerdragstart",function(t){n.isDragging=!0}),n.on("pointerdragend",function(t){n.isDragging=!1}),n.on("pointerdragmove",function(t){if(n.isDragging){var e=t.pointer.lastWorldPos.y;e>n.scrollBarTop&&e<n.scrollBarBotton&&(n.y=t.pointer.lastWorldPos.y)}}),n.on("pointerdragleave",function(t){if(n.isDragging){var e=t.pointer.lastWorldPos.y;e>n.scrollBarTop&&e<n.scrollBarBotton&&(n.y=t.pointer.lastWorldPos.y)}}),n}return r(e,t),e.prototype.setScrollBottom=function(t){this.scrollBarBotton=t,Math.floor(this.scrollBarBotton)<=Math.floor(this.scrollBarTop)&&(this.visible=!1)},e}(o.Actor);e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(4),s=n(12),u=n(18),c=n(17),d=n(6),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onInitialize=function(t){var e=t.drawWidth/2,n=u.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,a.Resources.title,.9,.8),i=new o.Actor(e,n.height/2+a.Config.gridPadding,n.width,n.height);i.scale=n.scale,i.addDrawing(a.Resources.title),this.add(i);var r=d.default.get().getUIButtonSizing(),c=r.padding,l=r.maxScale,f=u.calcDimensionsSingleObjectTexture(t.drawHeight,t.drawWidth,a.Resources.startMenu,c,l),p=this.createButton(f,e,i.getBottom()+a.Config.optionPadding+f.height/2,a.Resources.startMenu,function(){return t.goToScene(s.getGameWindow())}),g=this.createButton(f,e,p.getBottom()+a.Config.gridPadding+f.height/2,a.Resources.upgradeMenu,function(){return t.goToScene(s.Scenes.UPGRADES)}),h=this.createButton(f,e,g.getBottom()+a.Config.gridPadding+f.height/2,a.Resources.optionMenu,function(){return t.goToScene(s.Scenes.OPTIONS)}),y=this.createButton(f,e,h.getBottom()+a.Config.gridPadding+f.height/2,a.Resources.helpMenu,function(){return t.goToScene(s.Scenes.HELP)});this.add(p),this.add(h),this.add(y),this.add(g),this.setBackround(y.getBottom()),this.initScroll(y.getBottom())},e.prototype.onActivate=function(){c.default.get().backgroundMusicEnd()},e.prototype.onDeactivate=function(){},e}(n(36).default);e.MainMenu=l},,function(t,e,n){t.exports=n.p+"00f14d085530ea0ae58c17a32b3fe27f.wav"},function(t,e,n){t.exports=n.p+"5acc4c358abe356ab34cb46990213c87.mp3"},function(t,e,n){t.exports=n.p+"e1587389071cad642af4ea472a7657df.wav"},function(t,e,n){t.exports=n.p+"7969b4d1ca99e09c909f6b4247f2e20a.wav"},function(t,e,n){t.exports=n.p+"ec591911768b22068d38bb5b2a321448.ogg"},function(t,e,n){t.exports=n.p+"c17429a3194184f1823e8652b19665db.wav"},function(t,e,n){t.exports=n.p+"9b230c404133d31e8b32b72e4f4709d6.wav"},function(t,e,n){t.exports=n.p+"84f7a92ac15bb28de085370686c46b57.wav"},function(t,e,n){t.exports=n.p+"b58455f5ec6aaf2a19902f196a55e98a.wav"},function(t,e,n){t.exports=n.p+"6c9f119213f2371e5ffa564621e7c7cf.png"},function(t,e,n){t.exports=n.p+"7765777ed029910c394ea6ecdc46e707.png"},function(t,e,n){t.exports=n.p+"3329db2fa28ce34b8c3c074e4c25d295.png"},function(t,e,n){t.exports=n.p+"c9c8f13302fa1b1eeb4d2e5345c5bbba.png"},function(t,e,n){t.exports=n.p+"60352ab041f9e1e001176386f2dc105a.png"},function(t,e,n){t.exports=n.p+"031849bdaba0fc1f7b8e931a8cd4b081.png"},function(t,e,n){t.exports=n.p+"4be259f95a7562b19fc50f5956f3064a.png"},function(t,e,n){t.exports=n.p+"f37c84d41789ca95567a2e9f9b3288cb.png"},function(t,e,n){t.exports=n.p+"57df989eadc0b9703add8cdbd84d82f9.png"},function(t,e,n){t.exports=n.p+"2f01ab32d051553af7e9edc5f70c3831.png"},function(t,e,n){t.exports=n.p+"252e335cd8e95aa7f9af810197527c88.png"},function(t,e,n){t.exports=n.p+"5bbe8e44117d6281e0990e5a0213c814.png"},function(t,e,n){t.exports=n.p+"6944ce0fd23293c610a6b7881300e188.png"},function(t,e,n){t.exports=n.p+"0574a2e0749918363ef5593ddc58b2e7.png"},function(t,e,n){t.exports=n.p+"e7192d5fba02e9c6c174e7e3d9487a6b.png"},function(t,e,n){t.exports=n.p+"46f00f6169dccc5ee028881800a09fe3.png"},function(t,e,n){t.exports=n.p+"3844e977328e0e91b54f2d32278684c5.png"},function(t,e,n){t.exports=n.p+"56376cf0ad0de37681a110e6dbfc3fb8.png"},function(t,e,n){t.exports=n.p+"4ce8baed92fdbe83ea831d09b512beb2.png"},function(t,e,n){t.exports=n.p+"b6ac9dbcd6cad76692d5dc9ffd4d530d.png"},function(t,e,n){t.exports=n.p+"d564e115a42fa163a7bc9e1328b2d216.png"},function(t,e,n){t.exports=n.p+"ff3ec13a365eb079e29c3a06b576bad7.png"},function(t,e,n){t.exports=n.p+"598df00bd95514ed5a3f054793f36da1.png"},function(t,e,n){t.exports=n.p+"d848ad40f4eee6a0b29882906e9b4c24.png"},function(t,e,n){t.exports=n.p+"ccd1e8955823c41dd50406b82e3d7dc0.png"},function(t,e,n){t.exports=n.p+"53b20a23b0fa9be3ec391f1dd49a6492.png"},function(t,e,n){t.exports=n.p+"dd8089d1ad5e36afe0d889a9218a0559.png"},function(t,e,n){t.exports=n.p+"d23070e309626133deb93bbabf5d25bb.png"},function(t,e,n){t.exports=n.p+"135852ebc677f398779a9ac03e3c396b.png"},function(t,e,n){t.exports=n.p+"64c5b08a042975010b476c3ca33efd4d.png"},function(t,e,n){t.exports=n.p+"fb261f33ec74628ffab99997289e2f44.png"},function(t,e,n){t.exports=n.p+"5d8c965fd0efaf1fa74941ad5cbb8d3c.png"},function(t,e,n){t.exports=n.p+"8d6d5a0dc09cfb470714a9dbe963edd4.png"},function(t,e,n){t.exports=n.p+"5370dd7a56a2e256105c0d5ae9a716f5.png"},function(t,e,n){t.exports=n.p+"21c2960a6ef19bc7b845d01041d556b9.png"},function(t,e,n){t.exports=n.p+"022ab466b958b1e014b14ab33cf74a84.png"},function(t,e,n){t.exports=n.p+"d906ca717fba5c1dc816ff2688f30fed.png"},function(t,e,n){t.exports=n.p+"e1f03a0829378e36ba7058cc784f431c.png"},function(t,e,n){t.exports=n.p+"29171ae82e287f9d176ab7ddd7f6b382.png"},function(t,e,n){var i={"./GameOver.png":201,"./background.old.png":200,"./background.png":199,"./card.png":198,"./coin.png":76,"./helpTitle.png":197,"./icon-192.png":196,"./icon-512.png":195,"./menu/cards.png":194,"./menu/confirm.png":193,"./menu/credits.png":192,"./menu/help.png":191,"./menu/intro.png":190,"./menu/menu.png":189,"./menu/next.png":188,"./menu/options.png":187,"./menu/playing.png":186,"./menu/start.png":185,"./menu/upgrade.png":184,"./numbers/0.png":183,"./numbers/1.png":182,"./numbers/2.png":181,"./numbers/3.png":75,"./numbers/4.png":180,"./numbers/5.png":179,"./numbers/6.png":178,"./numbers/7.png":177,"./numbers/8.png":176,"./numbers/9.png":175,"./optionTitle.png":174,"./potion.png":74,"./skull.png":73,"./sword.png":72,"./title.png":71,"./ui/blank.png":173,"./ui/coin.png":172,"./ui/coinPile.png":171,"./ui/heart.png":70,"./ui/left.png":170,"./ui/right.png":169,"./ui/scroll.png":168,"./ui/sword.png":69,"./ui/x.png":68,"./upgrades/difficulty.png":167,"./upgrades/grid.png":166,"./upgradesTitle.png":165,"./victory.png":164};function r(t){var e=o(t);return n(e)}function o(t){var e=i[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=202},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,function(t,e){},,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=function(){function t(t,e,n,i){this.title=t,this.description=e,this.currentLevelToPriceMap=i}return t.create=function(e){return new t(e.title,e.description,i.Stream.of(e.prices).map(function(t){return t.level}).max(i.Comparator.default()).orElse(0),i.Stream.of(e.prices).collect(i.Collectors.toMap(function(t){return t.level},function(t){return t.price})))},t.prototype.getDetails=function(t){return{title:this.title,description:this.description,maxLevel:this.maxLevel,currentLevel:t,price:this.currentLevelToPriceMap.get(t)}},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(12),o=n(152),a=n(150),s=n(149),u=n(148),c=n(147),d=n(146),l=n(142),f=n(6),p=n(19),g=n(126),h=n(118),y=n(117),S=new a.default,w=new o.MainMenu(S),b=new d.Options(S);S.add(r.Scenes.MAIN_MENU,w),S.add(r.Scenes.GAME_OVER,new u.GameOver(S)),S.add(r.Scenes.STORY_GAME_WINDOW,new g.StoryGameWindow(S)),S.add(r.Scenes.GRID_GAME_WINDOW,new h.GridGameWindow(S)),S.add(r.Scenes.VICTORY,new c.Victory(S)),S.add(r.Scenes.OPTIONS,b),S.add(r.Scenes.HELP,new l.Help(S)),S.add(r.Scenes.UPGRADES,new y.UpgradeScene(S));var m=new s.GameLoader;Object.keys(i.Resources).forEach(function(t){return m.addResource(i.Resources[t])}),S.start(m).then(function(){p.default.initialize().then(function(){f.default.initialize(S),S.goToScene(r.Scenes.MAIN_MENU)})})}]);
//# sourceMappingURL=main.js.map